<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>rwqccnuimd的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="rwqccnuimd的博客">
<meta property="og:url" content="http://example.com/page/11/index.html">
<meta property="og:site_name" content="rwqccnuimd的博客">
<meta property="og:locale">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="rwqccnuimd的博客" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">rwqccnuimd的博客</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Suche"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Suche"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-sql/lianxushijian" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/07/22/sql/lianxushijian/" class="article-date">
  <time class="dt-published" datetime="2021-07-22T02:42:38.000Z" itemprop="datePublished">2021-07-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/SQL/">SQL</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/07/22/sql/lianxushijian/">连续时间问题</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="问题1"><a href="#问题1" class="headerlink" title="问题1"></a>问题1</h1><p>已知日活表table如下图所示：</p>
<p><img src="./0.png"></p>
<p>现在要计算出</p>
<h2 id="日活表求每个用户一周内活跃天数"><a href="#日活表求每个用户一周内活跃天数" class="headerlink" title="日活表求每个用户一周内活跃天数"></a>日活表求每个用户一周内活跃天数</h2><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><ol>
<li><p>使用<code>timestampdiff</code>函数过滤出一周内有过登录的记录</p>
</li>
<li><p>根据用户id分组统计计数</p>
</li>
</ol>
<blockquote>
<p>row_number是求连续时间问题的第一步</p>
</blockquote>
<h3 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">with</span> base <span class="keyword">as</span> ( <span class="comment">-- 计算一周内有过登录的记录</span></span><br><span class="line">    <span class="keyword">select</span></span><br><span class="line">        <span class="operator">*</span></span><br><span class="line">    <span class="keyword">from</span></span><br><span class="line">        <span class="keyword">table</span></span><br><span class="line">    <span class="keyword">where</span></span><br><span class="line">        timestampdiff(<span class="keyword">day</span>, <span class="type">time</span>, now()) <span class="operator">&lt;=</span> <span class="number">7</span> <span class="comment">-- 核心在这里</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	user_id,</span><br><span class="line">	<span class="built_in">count</span>(<span class="number">1</span>) <span class="keyword">AS</span> <span class="string">&#x27;登录天数&#x27;</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	base</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	user_id</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">	user_id</span><br></pre></td></tr></table></figure>

<h3 id="timestampdiff函数解释"><a href="#timestampdiff函数解释" class="headerlink" title="timestampdiff函数解释"></a>timestampdiff函数解释</h3><blockquote>
<p>timestampdiff(unit, datetime_1, datetime_2)</p>
</blockquote>
<p>该函数用来计算两个时间的差，第一个参数是差值的单位，可以是<code>minute</code>,<code>day</code>,<code>hour</code>,<code>second</code>，后面两个参数是时间，需要注意的是<code>datetime_2</code>减去<code>datetime_1</code>，也就是后面的减前面的</p>
<h2 id="日活表求每个用户一周内最大连续活跃天数"><a href="#日活表求每个用户一周内最大连续活跃天数" class="headerlink" title="日活表求每个用户一周内最大连续活跃天数"></a>日活表求每个用户一周内最大连续活跃天数</h2><h3 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h3><ol>
<li>使用<code>timestampdiff</code>来过滤出最近一周的记录</li>
<li>使用<code>row_number</code>函数来计算每一个用户登录日期的顺序</li>
<li>利用<code>date_sub</code>函数来计算每一条记录在<code>登录顺序</code>天数之前的日期</li>
<li>根据第4步的日期来分组计数，将最大值作为最大连续登录天数</li>
</ol>
<blockquote>
<p>判断是否连续的核心就是站在某一天往前推顺序的N天可以同步到同一日期，那么这个就是连续的</p>
</blockquote>
<h3 id="SQL-1"><a href="#SQL-1" class="headerlink" title="SQL"></a>SQL</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> base <span class="keyword">as</span> (</span><br><span class="line">    <span class="keyword">select</span></span><br><span class="line">        <span class="operator">*</span>,</span><br><span class="line">        <span class="built_in">row_number</span>() <span class="keyword">over</span> (<span class="keyword">partition</span> <span class="keyword">by</span> user_id <span class="keyword">order</span> <span class="keyword">by</span> <span class="type">date</span>) <span class="keyword">as</span> ranking</span><br><span class="line">    <span class="keyword">from</span></span><br><span class="line">        <span class="keyword">table</span></span><br><span class="line">    <span class="keyword">where</span></span><br><span class="line">        timestampdiff(<span class="keyword">day</span>, <span class="type">time</span>, now()) <span class="operator">&lt;=</span> <span class="number">7</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">    user_id,</span><br><span class="line">    <span class="built_in">max</span>(count) <span class="keyword">as</span> <span class="string">&#x27;最大连续登录天数&#x27;</span></span><br><span class="line"><span class="keyword">from</span> (</span><br><span class="line">    <span class="keyword">select</span></span><br><span class="line">        user_id,</span><br><span class="line">        date_sub(<span class="type">date</span>, <span class="type">interval</span> ranking <span class="keyword">day</span>) <span class="keyword">as</span> gap,</span><br><span class="line">        <span class="built_in">count</span>(<span class="number">1</span>) <span class="keyword">as</span> count</span><br><span class="line">    <span class="keyword">from</span></span><br><span class="line">        base</span><br><span class="line">    <span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line">        user_id,</span><br><span class="line">        date_sub(<span class="type">date</span>, <span class="type">interval</span> ranking <span class="keyword">day</span>)</span><br><span class="line">    <span class="keyword">order</span> <span class="keyword">by</span></span><br><span class="line">        user_id</span><br><span class="line">) <span class="keyword">as</span> a</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line">    user_id</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span></span><br><span class="line">    user_id</span><br></pre></td></tr></table></figure>

<h1 id="mysql常见的时间日期函数"><a href="#mysql常见的时间日期函数" class="headerlink" title="mysql常见的时间日期函数"></a>mysql常见的时间日期函数</h1><p><img src="https://pic1.zhimg.com/v2-378511c14708de1ea5ea3fb5bb99ac08_r.jpg" alt="mysql时间日期函数"></p>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><ul>
<li>SQL笔试题（1）：求连续时间问题（必考难题）. <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/349358841">https://zhuanlan.zhihu.com/p/349358841</a></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> base <span class="keyword">as</span> (</span><br><span class="line">    <span class="keyword">select</span></span><br><span class="line">        user_id,</span><br><span class="line">        date_sub(<span class="type">date</span>, <span class="type">interval</span> ranking <span class="keyword">day</span>) <span class="keyword">as</span> gap,</span><br><span class="line">        <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> num</span><br><span class="line">    <span class="keyword">from</span> (</span><br><span class="line">        <span class="keyword">select</span></span><br><span class="line">            <span class="operator">*</span>,</span><br><span class="line">            <span class="built_in">row_number</span>() <span class="keyword">over</span> (<span class="keyword">partition</span> <span class="keyword">by</span> user_id <span class="keyword">order</span> <span class="keyword">by</span> <span class="type">date</span>) <span class="keyword">as</span> ranking</span><br><span class="line">        <span class="keyword">from</span></span><br><span class="line">            <span class="keyword">user</span></span><br><span class="line">        <span class="keyword">where</span></span><br><span class="line">            <span class="type">date</span> <span class="keyword">between</span> <span class="string">&#x27;2020-01-01&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;2020-01-31&#x27;</span></span><br><span class="line">    ) <span class="keyword">as</span> a</span><br><span class="line">    <span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line">        user_id,</span><br><span class="line">        date_sub(<span class="type">date</span>, <span class="type">interval</span> ranking <span class="keyword">day</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">    user_id,</span><br><span class="line">    <span class="built_in">max</span>(num) <span class="keyword">as</span> <span class="string">&#x27;最大连续登录天数&#x27;</span></span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">    base</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line">    user_id  </span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span></span><br><span class="line">    user_id</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/07/22/sql/lianxushijian/" data-id="cl85d5h5t0094i99o4kv11hq0" data-title="连续时间问题" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SQL/" rel="tag">SQL</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-yewu/index_decrease" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/07/18/yewu/index_decrease/" class="article-date">
  <time class="dt-published" datetime="2021-07-18T05:36:41.000Z" itemprop="datePublished">2021-07-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E4%B8%9A%E5%8A%A1/">业务</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/07/18/yewu/index_decrease/">某一项指标下降如何分析</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>一般有几个面试中常遇到的业务分析问题：</p>
<ul>
<li>若产品的DAU下降了，如何分析其原因？</li>
<li>遇到留存下跌怎么分析？</li>
<li>某单车周一的成交额和周日的成交额相比，出现了降幅，怎么分析?</li>
</ul>
<p>这一类问题考察的是面试者:<br>面对这样的问题时的<code>分析框架</code>与<code>逻辑思维</code>，这是一个优秀的数据分析师必须具备的能力。</p>
<h1 id="分析步骤"><a href="#分析步骤" class="headerlink" title="分析步骤"></a>分析步骤</h1><h2 id="1-明确数据是否准确或者异常，判断这个下降是否合理"><a href="#1-明确数据是否准确或者异常，判断这个下降是否合理" class="headerlink" title="1. 明确数据是否准确或者异常，判断这个下降是否合理"></a>1. 明确数据是否准确或者异常，判断这个下降是否合理</h2><ul>
<li>数据服务、数据上报、数据统计上的BUG</li>
<li>数据转化问题：将原始数据转化成报表上的数据的时候可能会出现错误</li>
<li>周期性的变化，则没有必要着急</li>
</ul>
<h2 id="2-维度拆分"><a href="#2-维度拆分" class="headerlink" title="2. 维度拆分"></a>2. 维度拆分</h2><p>总结一下信息流日活常用的维度与指标，以及从哪一个视角进行拆分。</p>
<ul>
<li><p>数据视角</p>
<ul>
<li>数据传输</li>
<li>数据存储</li>
<li>数据计算</li>
</ul>
</li>
<li><p>竞品视角</p>
<ul>
<li>精品活动</li>
<li>竞品新功能</li>
<li>竞品新排名</li>
</ul>
</li>
<li><p>行业规律视角</p>
<ul>
<li>周末效应</li>
<li>大事件热点</li>
<li>节假日热点</li>
</ul>
</li>
<li><p>用户视角拆分</p>
<ul>
<li>新增/老用户</li>
<li>品牌</li>
<li>渠道</li>
<li>地域</li>
<li>入口</li>
<li>时段</li>
</ul>
</li>
<li><p>内容视角</p>
<ul>
<li>频道</li>
<li>分类</li>
<li>UGC</li>
<li>图文/视频</li>
</ul>
</li>
<li><p>产品视角</p>
<ul>
<li>系统: IOS/安卓</li>
<li>版本: 产品新鲜效应</li>
<li>运营活动</li>
</ul>
</li>
</ul>
<p>对每个维度下的各个指标进行比例值变化的计算，并计算影响系数。</p>
<blockquote>
<p>影响系数=(今日量−昨日量)/(今日总量−昨日总量)</p>
</blockquote>
<h2 id="3-做出假设"><a href="#3-做出假设" class="headerlink" title="3. 做出假设"></a>3. 做出假设</h2><p>针对初步定位的影响范围，进行进一步的排查。分内外部两个维度来做假设，在内部维度排查时建议针对数据异常问题专门建一个群，拉上相应的<code>产品</code>、<code>技术</code>、<code>运营</code>人员一起，了解数据异常时间点附近做了什么<code>产品</code>、<code>运营</code>、<code>技术侧</code>调整，外部因素则需要进行详细的调查和分析。</p>
<p><img src="https://img-blog.csdnimg.cn/20200705111536457.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MDY5NjY3,size_16,color_FFFFFF,t_70"></p>
<ul>
<li><p>内部</p>
<ul>
<li>产品侧<ul>
<li>核心功能</li>
</ul>
</li>
<li>技术侧<ul>
<li>系统BUG</li>
<li>故障</li>
</ul>
</li>
<li>运营侧<ul>
<li>运营策略</li>
<li>推广效果</li>
<li>推广渠道</li>
</ul>
</li>
</ul>
</li>
<li><p>外部</p>
<ul>
<li>竞争对手<ul>
<li>竞品活动</li>
<li>竞品新功能</li>
<li>竞品补贴</li>
</ul>
</li>
<li>宏观经济环境<ul>
<li>GDP</li>
<li>人均收入</li>
</ul>
</li>
<li>社会舆论<ul>
<li>负面新闻</li>
</ul>
</li>
<li>政策支持<ul>
<li>政治</li>
<li>经济</li>
<li>财政</li>
<li>税收</li>
<li>产业</li>
<li>投资</li>
<li>专利</li>
<li>政府补贴</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="4-细分假设，确立原因"><a href="#4-细分假设，确立原因" class="headerlink" title="4. 细分假设，确立原因"></a>4. 细分假设，确立原因</h2><p>可以细分分析的维度实在太多，逻辑上说核心点在于一个假设得到验证后，在这个假设为真的基础上，进行<code>更细维度的数据拆分</code>。我们需要记住这种分析方式，当猜测是某种原因造成数据异常时，只要找到该原因所代表的细分对立面做对比，就可以证明或证伪我们的猜测，直到最后找到真正原因。</p>
<h1 id="例题1"><a href="#例题1" class="headerlink" title="例题1"></a>例题1</h1><blockquote>
<p>某APP日活突然下降5%，需要尽快排查一下数据下跌的原因。</p>
</blockquote>
<h2 id="1-对数据异常原因做出假设，利用数据验证"><a href="#1-对数据异常原因做出假设，利用数据验证" class="headerlink" title="1. 对数据异常原因做出假设，利用数据验证"></a>1. 对数据异常原因做出<code>假设</code>，利用<code>数据</code>验证</h2><p>这所以这样做的原因有以下几点：</p>
<ul>
<li>影响DAU因素较多，对所有维度直接拆解耗时耗力。</li>
<li>所以需要结合以往经验及各种信息，对数据异常的原因做出假设，然后对数据从不同维度拆分来验证假设。</li>
<li>可能随着之前的假设的验证不断进行新的假设，直到定位原因。</li>
</ul>
<p>一个可能的假设可以从下面几个角度去考虑：</p>
<ul>
<li><p>统计口径</p>
<ul>
<li>业务逻辑有更改</li>
<li>指标计算方式有更改</li>
</ul>
</li>
<li><p>产品角度</p>
<ul>
<li>功能有调整</li>
<li>策略有调整</li>
<li>样式有改版</li>
</ul>
</li>
<li><p>运营角度</p>
<ul>
<li>运营策略</li>
<li>push的效果</li>
<li>拉新的渠道</li>
<li>投放推广</li>
<li>活动</li>
</ul>
</li>
<li><p>技术</p>
<ul>
<li>接口不稳定</li>
<li>系统故障</li>
<li>APP故障</li>
<li>数据的传输、存储、清洗有问题</li>
</ul>
</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/img_convert/1268560aaaf15c2b5fadd4259006adf8.png"></p>
<h2 id="2-确定数据的真实性"><a href="#2-确定数据的真实性" class="headerlink" title="2. 确定数据的真实性"></a>2. 确定数据的真实性</h2><p>具体的方法有</p>
<ul>
<li>将时间轴拉长（3个月），做同比与环比，看近期异常还是历史异常；</li>
<li>查看与该指标相关的其他指标是否异常；</li>
<li>找产品与研发确定数据的真实性。</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/img_convert/83a5540065b399f9a6603ee4646064cb.png"></p>
<h2 id="3-常见拆分的维度"><a href="#3-常见拆分的维度" class="headerlink" title="3. 常见拆分的维度"></a>3. 常见拆分的维度</h2><p><img src="https://img-blog.csdnimg.cn/img_convert/e5e9ebc6a7cdd5990fb06bd302bcd966.png"></p>
<p>根据以上维度拆分之后，每项数据都需要<code>历史数据做</code>对比，计算<code>影响系数</code>。影响系数越大，说明此处为主要原因所在。通过上述维度进行初步拆分，可以大致定位数据异常范围。</p>
<h2 id="4-外部原因分析"><a href="#4-外部原因分析" class="headerlink" title="4. 外部原因分析"></a>4. 外部原因分析</h2><p>主要是<code>PEST（政治、经济、社会、技术）模型</code>进行分析。</p>
<ul>
<li>P-政治：国家政策影响</li>
<li>E-经济：竞品APP</li>
<li>S-社会：节假日、重大社会事件</li>
<li>T-技术：</li>
</ul>
<h2 id="5-内部原因分析"><a href="#5-内部原因分析" class="headerlink" title="5. 内部原因分析"></a>5. 内部原因分析</h2><p>通过初步分析定位范围之后，需要进行进一步的排查，一般从三个维度来分析：<code>产品</code>、<code>技术</code>、<code>运营</code>；可以和这几个人一起拉一个会讨论一下。同时应注意数据统计口径是否发生变化。</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/3dd510193837a2504fdff92995474a0c.png"></p>
<h2 id="6-总结"><a href="#6-总结" class="headerlink" title="6. 总结"></a>6. 总结</h2><p>整个的分析流程在于</p>
<blockquote>
<p>结果以往数据做出假设 -&gt; 假设验证后 -&gt; 从不同的角度进行拆解，确定异常的范围 -&gt; 从<code>产品</code>、<code>运营</code>、<code>技术</code>侧逐一排查，最终找到原因。</p>
</blockquote>
<p>推荐的答案为:</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/217eb6fd9d96a9f297e7d12a0cb805ee.png"></p>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/Eric_data/article/details/115713706">https://blog.csdn.net/Eric_data/article/details/115713706</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/07/18/yewu/index_decrease/" data-id="cl85d5h6b00ari99ocs243qwa" data-title="某一项指标下降如何分析" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%B8%9A%E5%8A%A1/" rel="tag">业务</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-sql/lanyueliang/lanyueliang_answer" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/07/18/sql/lanyueliang/lanyueliang_answer/" class="article-date">
  <time class="dt-published" datetime="2021-07-18T02:15:02.000Z" itemprop="datePublished">2021-07-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>– 查出2020年高于订单平均金额的订单数量、订单总金额<br>select<br>    count(1) as ‘订单数量’,<br>    sum(order_payment) as ‘订单总金额’<br>from<br>    mall_unit_order<br>where<br>    order_payment &gt; (select avg(order_payment) from mall_unit_order)</p>
<p>/*<br>    定义：<br>        购买两单以及以上的用户为复购用户，同一用户相邻两单的支付间隔天数为复购间隔天数。<br>    计算每一个复购用户在2020年的平均复购间隔天数<br>    解题：<br>        当初被“同一用户相邻两单的支付间隔天数为复购间隔天数”给迷惑了，计算复购天数的逻辑就是计算首次下单时间与最后一次下单时间的差值然后除以订单的数量</p>
<p>*/</p>
<p>with base as (<br>    – 2020年的所有订单信息<br>    select<br>        *<br>    from<br>        mall_unit_order<br>    where<br>        pay_time &gt;= ‘2020-01-01’ and pay_time &lt; ‘2021-01-01’<br>    ORDER BY pay_time<br>),<br>user_filtered_base as (<br>    – 购买两单以上的用户的信息<br>    select<br>        *,<br>        DATEDIFF(date(pay_time), first_pay_time) as diff – 日期差<br>    from (<br>        select<br>            *,<br>            count(*) over (partition by buyer_nick) as order_num,<br>            min(date(pay_time)) over (partition by buyer_nick) as first_pay_time – 第一次购买时间<br>        from<br>            base<br>    ) as a<br>    where<br>        a.order_num &gt;= 2<br>)</p>
<p>select<br>    buyer_nick,<br>    ceil(max(diff) / (order_num - 1)) as ‘平均复购间隔天数’ – 向上取整<br>from<br>    user_filtered_base<br>group by<br>    buyer_nick</p>
<p>/*</p>
<p> 按月查出2020年3月份各个省份支付金额排在前3的城市在哪里</p>
<p>*/<br>with base as (<br>    select<br>        province,<br>        city,<br>        sum(order_payment) as pay_num<br>    from<br>        mall_unit_order<br>    where month(pay_time) = 7<br>    group by<br>        province, city<br>)<br>select<br>    province,<br>    city<br>from (</p>
<p>select<br>    *,<br>    row_number() over (partition by province order by pay_num desc) as ranking<br>from base<br>) as a<br>where ranking &lt;= 3<br>order by province, ranking</p>
<p>/*<br>    假设下单渠道有京东、天猫、淘宝，查出2020年3月份各个渠道订单支付总金额<br>*/</p>
<p>select<br>    order_source,<br>    sum(order_payment) as ‘支付总金额’<br>from<br>    mall_unit_order<br>where<br>    pay_time between ‘2020-07-01’ and ‘2020-07-31’<br>group by<br>    order_source</p>
<p>/*<br>    查出最近三个月内有购买行为的用户信息，包括字段：<br>        唯一用户ID，<br>        用户号码，<br>        支付订单数，<br>        支付总金额，<br>        支付总件数，<br>        最近一次购买时间<br>        常用收货省份，<br>        常用收货城市，<br>    用户ID中间5位数用<em>代替<br><em>/<br>with base as (<br>    select<br>        *<br>    from<br>        mall_unit_order<br>),<br>user_province as (<br>    select<br>        buyer_nick,<br>        province<br>    from (<br>        select<br>            buyer_nick,<br>            province,<br>            row_number() over (partition by buyer_nick order by num desc) as ranking<br>        from (<br>            select<br>                buyer_nick,<br>                province,<br>                count(</em>) as num<br>            from<br>                base<br>            group by<br>                buyer_nick, province<br>            order by<br>                buyer_nick, num desc<br>        ) as a<br>    ) as a<br>    where ranking = 1<br>),<br>user_city as (<br>    select<br>        buyer_nick,<br>        city<br>    from (<br>        select<br>            buyer_nick,<br>            city,<br>            row_number() over (partition by buyer_nick order by num desc) as ranking<br>        from (<br>            select<br>                buyer_nick,<br>                city,<br>                count(</em>) as num<br>            from<br>                base<br>            group by<br>                buyer_nick, city<br>            order by<br>                buyer_nick, num desc<br>        ) as a<br>    ) as a<br>    where ranking = 1<br>)</p>
<p>select<br>    a.<em>,<br>    b.province as ‘省份’,<br>    c.city as ‘城市’<br>from (<br>    select<br>        buyer_nick,<br>        concat(left(buyer_mobile, 3), ‘*****’, right(buyer_mobile, 3)) as ‘手机号’,<br>        count(</em>) as ‘支付订单数’,<br>        sum(order_payment) as ‘支付总金额’,<br>        sum(buy_num)  as ‘支付总件数’,<br>        max(pay_time) as ‘最近一次购买时间’<br>    from<br>        base<br>    group by<br>        buyer_nick<br>) as a<br>left join user_province as b<br>on b.buyer_nick = a.buyer_nick </p>
<p>left join user_city as c<br>on c.buyer_nick = a.buyer_nick</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/07/18/sql/lanyueliang/lanyueliang_answer/" data-id="cl85d5h8s00k2i99oauosh9t4" data-title="" class="article-share-link">Teilen</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-sql/lanyueliang" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/07/18/sql/lanyueliang/" class="article-date">
  <time class="dt-published" datetime="2021-07-18T02:09:38.000Z" itemprop="datePublished">2021-07-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/SQL/">SQL</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/07/18/sql/lanyueliang/">蓝月亮SQL笔试题</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="蓝月亮数据分析师SQL笔试题"><a href="#蓝月亮数据分析师SQL笔试题" class="headerlink" title="蓝月亮数据分析师SQL笔试题"></a>蓝月亮数据分析师SQL笔试题</h1><h2 id="文件下载"><a href="#文件下载" class="headerlink" title="文件下载"></a>文件下载</h2><ol>
<li><a href="sql.pdf">题目描述</a></li>
<li><a href="lanyueliang.sql">SQL文件</a></li>
</ol>
<h2 id="具体题目"><a href="#具体题目" class="headerlink" title="具体题目"></a>具体题目</h2><h3 id="1-查出2020年高于订单平均支付金额的订单数量、订单金额"><a href="#1-查出2020年高于订单平均支付金额的订单数量、订单金额" class="headerlink" title="1. 查出2020年高于订单平均支付金额的订单数量、订单金额"></a>1. 查出2020年高于订单平均支付金额的订单数量、订单金额</h3><p>解题思路：</p>
<ul>
<li>计算订单的平均支付金额：</li>
</ul>
<blockquote>
<p>平均支付金额 = 订单总额 / 订单数</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(order_payment) <span class="keyword">from</span> mall_unit_order</span><br></pre></td></tr></table></figure>

<ul>
<li>找到订单金额高于平均支付金额的所有订单数量、订单金额</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">    <span class="built_in">count</span>(order_id) <span class="keyword">as</span> <span class="string">&#x27;订单数量&#x27;</span>,</span><br><span class="line">    <span class="built_in">sum</span>(order_payment) <span class="keyword">as</span> <span class="string">&#x27;订单总金额&#x27;</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    mall_unit_order</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">    order_payment <span class="operator">&gt;</span> (</span><br><span class="line">        <span class="keyword">select</span> <span class="built_in">avg</span>(order_payment) <span class="keyword">from</span> mall_unit_order</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

<h3 id="2-定义：购买两单及以上的用户为复购用户，同一用户相邻两单的支付间隔天数为复购间隔天数，计算每一个用户在2020年的平均复购天数"><a href="#2-定义：购买两单及以上的用户为复购用户，同一用户相邻两单的支付间隔天数为复购间隔天数，计算每一个用户在2020年的平均复购天数" class="headerlink" title="2. 定义：购买两单及以上的用户为复购用户，同一用户相邻两单的支付间隔天数为复购间隔天数，计算每一个用户在2020年的平均复购天数"></a>2. 定义：购买两单及以上的用户为复购用户，同一用户相邻两单的支付间隔天数为复购间隔天数，计算每一个用户在2020年的平均复购天数</h3><p>解题思路：</p>
<ul>
<li>计算2018年的所有订单</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">    <span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    unit_mall_order</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">    pay_time <span class="operator">&gt;=</span> <span class="string">&#x27;2020-01-01&#x27;</span> <span class="keyword">and</span> pay_time <span class="operator">&lt;</span> <span class="string">&#x27;2021-01-01&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>用窗口函数分组计算每一个用户的首次下单时间</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">    <span class="operator">*</span>,</span><br><span class="line">    <span class="built_in">min</span>(pay_time) <span class="keyword">over</span> (<span class="keyword">partition</span> <span class="keyword">by</span> buyer_nick) <span class="keyword">as</span> <span class="string">&#x27;first_order_pay_time&#x27;</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    unit_mall_order</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">    pay_time <span class="operator">&gt;=</span> <span class="string">&#x27;2020-01-01&#x27;</span> <span class="keyword">and</span> pay_time <span class="operator">&lt;</span> <span class="string">&#x27;2021-01-01&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>计算本次下单时间与首次下单时间的天数差</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">    date_diff(<span class="type">date</span>(pay_time), <span class="type">date</span>(first_order_pay_time)) <span class="keyword">as</span> diff_days</span><br><span class="line">.....</span><br></pre></td></tr></table></figure>

<ul>
<li>根据用户分组计算平均天数</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">    buyer_nick,</span><br><span class="line">    <span class="built_in">ceil</span>(<span class="built_in">avg</span>(diff_days)) <span class="keyword">as</span> <span class="string">&#x27;平均天数&#x27;</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    X</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line">    buyer_nick</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> </span><br><span class="line">    buyer_nick</span><br></pre></td></tr></table></figure>

<blockquote>
<p>当初被“同一用户相邻两单的支付间隔天数为复购间隔天数”给迷惑了，计算复购天数的逻辑就是计算<code>首次下单时间</code>与<code>最后一次下单时间</code>的差值然后除以订单的数量</p>
</blockquote>
<p>完整的SQL</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> base <span class="keyword">as</span> (</span><br><span class="line">	<span class="comment">-- 2020年的所有订单信息</span></span><br><span class="line">	<span class="keyword">select</span></span><br><span class="line">		<span class="operator">*</span></span><br><span class="line">	<span class="keyword">from</span></span><br><span class="line">		mall_unit_order</span><br><span class="line">	<span class="keyword">where</span></span><br><span class="line">		pay_time <span class="operator">&gt;=</span> <span class="string">&#x27;2020-01-01&#x27;</span> <span class="keyword">and</span> pay_time <span class="operator">&lt;</span> <span class="string">&#x27;2021-01-01&#x27;</span></span><br><span class="line">	<span class="keyword">ORDER</span> <span class="keyword">BY</span> pay_time</span><br><span class="line">),</span><br><span class="line">user_filtered_base <span class="keyword">as</span> (</span><br><span class="line">	<span class="comment">-- 购买两单以上的用户的信息</span></span><br><span class="line">	<span class="keyword">select</span></span><br><span class="line">		<span class="operator">*</span>,</span><br><span class="line">		DATEDIFF(<span class="type">date</span>(pay_time), first_pay_time) <span class="keyword">as</span> diff <span class="comment">-- 日期差</span></span><br><span class="line">	<span class="keyword">from</span> (</span><br><span class="line">		<span class="keyword">select</span></span><br><span class="line">			<span class="operator">*</span>,</span><br><span class="line">			<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">over</span> (<span class="keyword">partition</span> <span class="keyword">by</span> buyer_nick) <span class="keyword">as</span> order_num,</span><br><span class="line">			<span class="built_in">min</span>(<span class="type">date</span>(pay_time)) <span class="keyword">over</span> (<span class="keyword">partition</span> <span class="keyword">by</span> buyer_nick) <span class="keyword">as</span> first_pay_time <span class="comment">-- 第一次购买时间</span></span><br><span class="line">		<span class="keyword">from</span> </span><br><span class="line">			base</span><br><span class="line">	) <span class="keyword">as</span> a</span><br><span class="line">	<span class="keyword">where</span> </span><br><span class="line">		a.order_num <span class="operator">&gt;=</span> <span class="number">2</span>	</span><br><span class="line">)</span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">	buyer_nick,</span><br><span class="line">	<span class="built_in">ceil</span>(<span class="built_in">max</span>(diff) <span class="operator">/</span> (order_num <span class="operator">-</span> <span class="number">1</span>)) <span class="keyword">as</span> <span class="string">&#x27;平均复购间隔天数&#x27;</span> <span class="comment">-- 向上取整</span></span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">	user_filtered_base</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line">	buyer_nick</span><br></pre></td></tr></table></figure>


<h3 id="3-按月查出2020年3月份各个省份支付金额排在前3的城市在哪里"><a href="#3-按月查出2020年3月份各个省份支付金额排在前3的城市在哪里" class="headerlink" title="3. 按月查出2020年3月份各个省份支付金额排在前3的城市在哪里"></a>3. 按月查出2020年3月份各个省份支付金额排在前3的城市在哪里</h3><p>解题思路:</p>
<ul>
<li>查出2020年3月的订单</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">    <span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    mall_unit_order</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">    pay_time <span class="operator">&gt;=</span> <span class="string">&#x27;2020-03-01&#x27;</span> <span class="keyword">and</span> pay_time <span class="operator">&lt;</span> <span class="string">&#x27;2020-04-01&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>查出各个省份各个城市的支付金额</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">    province,</span><br><span class="line">    city,</span><br><span class="line">    <span class="built_in">sum</span>(order_payment) <span class="keyword">as</span> payment</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    X</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line">    province,</span><br><span class="line">    city</span><br></pre></td></tr></table></figure>

<ul>
<li>找出各个省份排名前三的城市</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">    <span class="operator">*</span>,</span><br><span class="line">    <span class="built_in">row_number</span>() <span class="keyword">over</span> (<span class="keyword">partition</span> <span class="keyword">by</span> province, city <span class="keyword">order</span> <span class="keyword">by</span> payment <span class="keyword">desc</span>) <span class="keyword">as</span> ranking</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>最终SQL</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> base <span class="keyword">as</span> (</span><br><span class="line">    <span class="keyword">select</span></span><br><span class="line">        province,</span><br><span class="line">        city,</span><br><span class="line">        <span class="built_in">sum</span>(order_payment) <span class="keyword">as</span> payment</span><br><span class="line">    <span class="keyword">from</span></span><br><span class="line">        mall_unit_order</span><br><span class="line">    <span class="keyword">where</span></span><br><span class="line">        pay_time <span class="operator">&gt;=</span> <span class="string">&#x27;2020-03-01&#x27;</span> <span class="keyword">and</span> pay_time <span class="operator">&lt;</span> <span class="string">&#x27;2020-04-01&#x27;</span></span><br><span class="line">    <span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line">        province,</span><br><span class="line">        city</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">    province,</span><br><span class="line">    city</span><br><span class="line"><span class="keyword">from</span> (</span><br><span class="line">    <span class="keyword">select</span></span><br><span class="line">        <span class="operator">*</span>,</span><br><span class="line">        <span class="built_in">row_number</span>() <span class="keyword">over</span> (<span class="keyword">partition</span> <span class="keyword">by</span> province, city <span class="keyword">order</span> <span class="keyword">by</span> payment <span class="keyword">desc</span>) <span class="keyword">as</span> ranking</span><br><span class="line">    <span class="keyword">from</span></span><br><span class="line">        base</span><br><span class="line">) <span class="keyword">as</span> a</span><br><span class="line"><span class="keyword">where</span> </span><br><span class="line">    ranking <span class="operator">&lt;=</span> <span class="number">3</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span></span><br><span class="line">    province,</span><br><span class="line">    ranking</span><br></pre></td></tr></table></figure>


<h3 id="4-假设下单渠道有京东、天猫、淘宝，查出2020年3月份各个渠道订单支付总金额"><a href="#4-假设下单渠道有京东、天猫、淘宝，查出2020年3月份各个渠道订单支付总金额" class="headerlink" title="4. 假设下单渠道有京东、天猫、淘宝，查出2020年3月份各个渠道订单支付总金额"></a>4. 假设下单渠道有京东、天猫、淘宝，查出2020年3月份各个渠道订单支付总金额</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">    order_source,</span><br><span class="line">	<span class="built_in">sum</span>(order_payment) <span class="keyword">as</span> <span class="string">&#x27;支付总金额&#x27;</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    unit_mall_order</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">    pay_time <span class="operator">&gt;=</span> <span class="string">&#x27;2020-03-01&#x27;</span> <span class="keyword">and</span> pay_time <span class="operator">&lt;</span> <span class="string">&#x27;2020-04-01&#x27;</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line">    order_source</span><br></pre></td></tr></table></figure>

<h3 id="5-查出最近三个月内有购买行为的用户信息，包括字段：唯一用户ID，用户号码，支付订单数，支付总金额，支付总件数，最近一次购买时间，常用收货省份，常用收货城市，手机号中间5位数用-代替"><a href="#5-查出最近三个月内有购买行为的用户信息，包括字段：唯一用户ID，用户号码，支付订单数，支付总金额，支付总件数，最近一次购买时间，常用收货省份，常用收货城市，手机号中间5位数用-代替" class="headerlink" title="5. 查出最近三个月内有购买行为的用户信息，包括字段：唯一用户ID，用户号码，支付订单数，支付总金额，支付总件数，最近一次购买时间，常用收货省份，常用收货城市，手机号中间5位数用*代替"></a>5. 查出最近三个月内有购买行为的用户信息，包括字段：唯一用户ID，用户号码，支付订单数，支付总金额，支付总件数，最近一次购买时间，常用收货省份，常用收货城市，手机号中间5位数用*代替</h3><p>解题思路：</p>
<ul>
<li><p>找到最近三个月的所有订单</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">    <span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    unit_mall_order</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">    <span class="keyword">month</span>(pay_time) <span class="operator">&gt;=</span> (<span class="keyword">month</span>(now()) <span class="operator">-</span> <span class="number">3</span>)</span><br></pre></td></tr></table></figure></li>
<li><p>找到所有的用户基本信息</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">    buyer_nick,</span><br><span class="line">    concat(<span class="keyword">left</span>(buyer_mobile, <span class="number">3</span>), <span class="string">&#x27;*****&#x27;</span>, <span class="keyword">right</span>(buyer_mobile, <span class="number">3</span>)) <span class="keyword">as</span> <span class="string">&#x27;手机号&#x27;</span>,</span><br><span class="line">    <span class="built_in">count</span>(order_id) <span class="keyword">as</span> <span class="string">&#x27;支付订单数&#x27;</span>,</span><br><span class="line">    <span class="built_in">sum</span>(order_payment) <span class="keyword">as</span> <span class="string">&#x27;支付总金额&#x27;</span>,</span><br><span class="line">    <span class="built_in">sum</span>(buy_num) <span class="keyword">as</span> <span class="string">&#x27;支付总件数&#x27;</span>,</span><br><span class="line">    <span class="built_in">min</span>(pay_time) <span class="keyword">as</span> <span class="string">&#x27;最近一次购买时间&#x27;</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    mall_unit_order</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> </span><br><span class="line">    buyer_nick,</span><br><span class="line">    buyer_mobile</span><br></pre></td></tr></table></figure>

<ul>
<li>找到用户常用收货省份</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">    buyer_nick,</span><br><span class="line">    province</span><br><span class="line"><span class="keyword">from</span> (</span><br><span class="line">    <span class="keyword">select</span></span><br><span class="line">        <span class="operator">*</span></span><br><span class="line">        <span class="built_in">row_number</span>() <span class="keyword">over</span> (<span class="keyword">partition</span> <span class="keyword">by</span> buyer_nick <span class="keyword">order</span> <span class="keyword">by</span> num <span class="keyword">desc</span>) <span class="keyword">as</span> ranking</span><br><span class="line">    <span class="keyword">from</span> (</span><br><span class="line">        <span class="keyword">select</span></span><br><span class="line">            buyer_nick,</span><br><span class="line">            province,</span><br><span class="line">            <span class="built_in">count</span>(order_id) <span class="keyword">as</span> num</span><br><span class="line">        <span class="keyword">from</span></span><br><span class="line">            mall_unit_order</span><br><span class="line">        <span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line">            buyer_nick,</span><br><span class="line">            province</span><br><span class="line">    ) <span class="keyword">as</span> a </span><br><span class="line">) <span class="keyword">as</span> a</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">    ranking <span class="operator">=</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>

<ul>
<li>找到用户常用收货城市</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">    buyer_nick,</span><br><span class="line">    city</span><br><span class="line"><span class="keyword">from</span> (</span><br><span class="line">    <span class="keyword">select</span></span><br><span class="line">        <span class="operator">*</span></span><br><span class="line">        <span class="built_in">row_number</span>() <span class="keyword">over</span> (<span class="keyword">partition</span> <span class="keyword">by</span> buyer_nick <span class="keyword">order</span> <span class="keyword">by</span> num <span class="keyword">desc</span>) <span class="keyword">as</span> ranking</span><br><span class="line">    <span class="keyword">from</span> (</span><br><span class="line">        <span class="keyword">select</span></span><br><span class="line">            buyer_nick,</span><br><span class="line">            city,</span><br><span class="line">            <span class="built_in">count</span>(order_id) <span class="keyword">as</span> num</span><br><span class="line">        <span class="keyword">from</span></span><br><span class="line">            mall_unit_order</span><br><span class="line">        <span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line">            buyer_nick,</span><br><span class="line">            city</span><br><span class="line">    ) <span class="keyword">as</span> a </span><br><span class="line">) <span class="keyword">as</span> a</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">    ranking <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>join汇总</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span></span><br><span class="line">    base <span class="keyword">as</span> (</span><br><span class="line">        <span class="keyword">select</span></span><br><span class="line">            <span class="operator">*</span></span><br><span class="line">        <span class="keyword">from</span></span><br><span class="line">            mall_unit_order</span><br><span class="line">        <span class="keyword">where</span></span><br><span class="line">            <span class="keyword">month</span>(pay_time) <span class="operator">&gt;=</span> (<span class="keyword">month</span>(now()) <span class="operator">-</span> <span class="number">3</span>)</span><br><span class="line">    ),</span><br><span class="line">    basic_info <span class="keyword">as</span> (</span><br><span class="line">        <span class="keyword">select</span></span><br><span class="line">            buyer_nick,</span><br><span class="line">            concat(<span class="keyword">left</span>(buyer_mobile, <span class="number">3</span>), <span class="string">&#x27;*****&#x27;</span>, <span class="keyword">right</span>(buyer_mobile, <span class="number">3</span>)) <span class="keyword">as</span> <span class="string">&#x27;手机号&#x27;</span>,</span><br><span class="line">            <span class="built_in">count</span>(order_id) <span class="keyword">as</span> <span class="string">&#x27;支付订单数&#x27;</span>,</span><br><span class="line">            <span class="built_in">sum</span>(order_payment) <span class="keyword">as</span> <span class="string">&#x27;支付总金额&#x27;</span>,</span><br><span class="line">            <span class="built_in">sum</span>(buy_num) <span class="keyword">as</span> <span class="string">&#x27;支付总件数&#x27;</span>,</span><br><span class="line">            <span class="built_in">min</span>(pay_time) <span class="keyword">as</span> <span class="string">&#x27;最近一次购买时间&#x27;</span></span><br><span class="line">        <span class="keyword">from</span></span><br><span class="line">            base</span><br><span class="line">        <span class="keyword">group</span> <span class="keyword">by</span> </span><br><span class="line">            buyer_nick,</span><br><span class="line">            buyer_mobile</span><br><span class="line">    ),</span><br><span class="line">    user_province <span class="keyword">as</span> (</span><br><span class="line">        <span class="keyword">select</span></span><br><span class="line">            buyer_nick,</span><br><span class="line">            province</span><br><span class="line">        <span class="keyword">from</span> (</span><br><span class="line">            <span class="keyword">select</span></span><br><span class="line">                <span class="operator">*</span>,</span><br><span class="line">                <span class="built_in">row_number</span>() <span class="keyword">over</span> (<span class="keyword">partition</span> <span class="keyword">by</span> buyer_nick <span class="keyword">order</span> <span class="keyword">by</span> num <span class="keyword">desc</span>) <span class="keyword">as</span> ranking</span><br><span class="line">            <span class="keyword">from</span> (</span><br><span class="line">                <span class="keyword">select</span></span><br><span class="line">                    buyer_nick,</span><br><span class="line">                    province,</span><br><span class="line">                    <span class="built_in">count</span>(order_id) <span class="keyword">as</span> num</span><br><span class="line">                <span class="keyword">from</span></span><br><span class="line">                    base</span><br><span class="line">                <span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line">                    buyer_nick,</span><br><span class="line">                    province</span><br><span class="line">            ) <span class="keyword">as</span> a </span><br><span class="line">        ) <span class="keyword">as</span> a</span><br><span class="line">        <span class="keyword">where</span></span><br><span class="line">            ranking <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">    ),</span><br><span class="line">    user_city <span class="keyword">as</span> (</span><br><span class="line">        <span class="keyword">select</span></span><br><span class="line">            buyer_nick,</span><br><span class="line">            city</span><br><span class="line">        <span class="keyword">from</span> (</span><br><span class="line">            <span class="keyword">select</span></span><br><span class="line">                <span class="operator">*</span>,</span><br><span class="line">                <span class="built_in">row_number</span>() <span class="keyword">over</span> (<span class="keyword">partition</span> <span class="keyword">by</span> buyer_nick <span class="keyword">order</span> <span class="keyword">by</span> num <span class="keyword">desc</span>) <span class="keyword">as</span> ranking</span><br><span class="line">            <span class="keyword">from</span> (</span><br><span class="line">                <span class="keyword">select</span></span><br><span class="line">                    buyer_nick,</span><br><span class="line">                    city,</span><br><span class="line">                    <span class="built_in">count</span>(order_id) <span class="keyword">as</span> num</span><br><span class="line">                <span class="keyword">from</span></span><br><span class="line">                    mall_unit_order</span><br><span class="line">                <span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line">                    buyer_nick,</span><br><span class="line">                    city</span><br><span class="line">            ) <span class="keyword">as</span> a </span><br><span class="line">        ) <span class="keyword">as</span> a</span><br><span class="line">        <span class="keyword">where</span></span><br><span class="line">            ranking <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">    a.<span class="operator">*</span>,</span><br><span class="line">	b.province <span class="keyword">as</span> <span class="string">&#x27;省份&#x27;</span>,</span><br><span class="line">	c.city <span class="keyword">as</span> <span class="string">&#x27;城市&#x27;</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    basic_info <span class="keyword">as</span> a</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span></span><br><span class="line">    user_province <span class="keyword">as</span> b</span><br><span class="line"><span class="keyword">on</span> </span><br><span class="line">    a.buyer_nick <span class="operator">=</span> b.buyer_nick</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span></span><br><span class="line">    user_city <span class="keyword">as</span> c</span><br><span class="line"><span class="keyword">on</span> </span><br><span class="line">    a.buyer_nick <span class="operator">=</span> c.buyer_nick</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/07/18/sql/lanyueliang/" data-id="cl85d5h5r008ui99o000481lp" data-title="蓝月亮SQL笔试题" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SQL/" rel="tag">SQL</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-practice/yinlian/0_basic_background_knowledge" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/07/17/practice/yinlian/0_basic_background_knowledge/" class="article-date">
  <time class="dt-published" datetime="2021-07-17T15:20:29.000Z" itemprop="datePublished">2021-07-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E9%93%B6%E8%81%94%E5%AE%9E%E4%B9%A0/">银联实习</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/07/17/practice/yinlian/0_basic_background_knowledge/">0_银联基础的业务知识</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="1-银联大战略"><a href="#1-银联大战略" class="headerlink" title="1. 银联大战略"></a>1. 银联大战略</h1><p>促进支付回流，当前微信支付宝占据了移动支付的绝大多数市场，二用户通过扫描这两大APP的支付二维码，然后去调对应绑定的银行卡的账户，从而不需要走银联，因此过滤费比之前下降很多，也就是说，在个人用户支付这一块，银联要抢占一些市场，这也是云闪付APP所产生的原因，通过银联自身的银联支付二维码，来促进这种直接刷卡交易的产生，从而去收取中介费。</p>
<p>简单来说就是：</p>
<blockquote>
<p>提高刷卡的积极性</p>
</blockquote>
<h1 id="2-银联支付二维码"><a href="#2-银联支付二维码" class="headerlink" title="2. 银联支付二维码"></a>2. 银联支付二维码</h1><p>银联支付二维码是国内各大银行都需要<code>统一使用</code>的支付二维码，比如在招商银行或者中国银行手机APP中使用付款码支付，则使用的是银联的支付二维码，这种方式极大地方便了手机银行APP这种传统的转账型APP，使其也变得像微信支付宝一样，也可以扫码支付。</p>
<h1 id="3-银行自收单"><a href="#3-银行自收单" class="headerlink" title="3. 银行自收单"></a>3. 银行自收单</h1><p>商业银行自己包装的支付产品，在自己的APP中完成支付，比如浦发银行，在APP中使用浦发信用卡完成支付。</p>
<h1 id="3-断直连"><a href="#3-断直连" class="headerlink" title="3. 断直连"></a>3. 断直连</h1><h2 id="3-1-定义"><a href="#3-1-定义" class="headerlink" title="3.1 定义"></a>3.1 定义</h2><p>“断直连”是指第三方支付机构切断之前直连银行的模式，接入<code>网联</code>或<code>银联</code>。</p>
<h2 id="3-2-目的"><a href="#3-2-目的" class="headerlink" title="3.2 目的"></a>3.2 目的</h2><p>与银行卡结算需通过卡组织银联不同，以<code>支付宝</code>和<code>财付通</code>为代表的第三方支付机构，在近年形成了<code>绕过银联、直连银行</code>的模式。为消除直连模式下潜在的信息不安全、信息不透明、重复投入等风险，央行牵头成立了<code>网联</code>平台，旨在为支付机构提供统一、公共的资金清算服务。</p>
<h1 id="4-国内支付市场发展态势"><a href="#4-国内支付市场发展态势" class="headerlink" title="4. 国内支付市场发展态势"></a>4. 国内支付市场发展态势</h1><ul>
<li>商业银行加强移动端APP的经营维护，通过与<code>电商</code>、<code>O2O</code>平台等流量热点场景合作，扩大在支付以及消费金融等<code>零售</code>业务中的流量入口。</li>
<li>银行与金融科技公司的合作从早期的<code>支付场景</code>扩展到<code>营销</code>、<code>风控</code>、<code>理财</code>、<code>资金管理</code>等全方位的合作。</li>
<li>在监管的压力下，<code>非银行支付机构</code>逐渐回归<code>支付服务本位</code>，并强调对<code>商户</code>和<code>行业</code>的赋能。</li>
</ul>
<h1 id="5-支付处理过程"><a href="#5-支付处理过程" class="headerlink" title="5. 支付处理过程"></a>5. 支付处理过程</h1><p>教育、清算、结算。</p>
<h1 id="6-借记类业务"><a href="#6-借记类业务" class="headerlink" title="6. 借记类业务"></a>6. 借记类业务</h1><p>借记类业务由<code>收单机构</code>发起，经银联<code>转接</code>到持卡人发卡银行，完成持卡人<code>银联关联账户</code>款项划出的业务。一般的银行卡都是借记卡，比如校园卡。</p>
<h1 id="7-贷记业务"><a href="#7-贷记业务" class="headerlink" title="7. 贷记业务"></a>7. 贷记业务</h1><p>贷记业务是指实现付款方（通过付款方收单机构）向收款方（通过收款方发卡机构）银联卡账户进行款项划付的业务。</p>
<h1 id="8-CUPS"><a href="#8-CUPS" class="headerlink" title="8. CUPS"></a>8. CUPS</h1><p>CUPS即银联转接清算系统，由核心转接系统与跨行清算系统组成，是银联的核心业务系统。</p>
<h1 id="10-收单业务"><a href="#10-收单业务" class="headerlink" title="10. 收单业务"></a>10. 收单业务</h1><p>银行卡收单业务，是指<code>收单机构</code>与<code>特约商户</code>签订银行卡受理协议，在特约商户按约定受理<code>银行卡</code>并与<code>持卡人</code>达成<code>交易</code>后，为特约商户提供<code>交易资金结算服务</code>的行为。</p>
<h1 id="9-收单机构"><a href="#9-收单机构" class="headerlink" title="9. 收单机构"></a>9. 收单机构</h1><p>收单机构是指持有 “银行卡收单牌照” 的具有很强线下拓展能力的民营企业，比如<code>拉卡拉</code>、<code>快钱</code>、<code>卡友</code>等公司。银联没有人力物力也没有自由度进行<code>全国业务拓展</code>（虽然现在银联有了自己的收单公司-银联商务），因此愿意分出一部分利润给收单机构，这样总流水反而更大。实际上银联也是分小头，发卡行、收单机构、银联按7:2:1分成。收单机构相较于发卡方银行，更专注于线下经营与业务拓展，其直面餐饮、房地产、娱乐、珠宝金饰、百货、超市、汽车销售等销售商户，资源丰盛并有人力精力进行线下维护。也可理解为收单机构在此类支付中，“出力多、直面各区域各消费类别商户、负责授权与账单结算等”。即收单机构的存在是此类支付中必不可少的环节。</p>
<h1 id="10-四方模式"><a href="#10-四方模式" class="headerlink" title="10. 四方模式"></a>10. 四方模式</h1><p>四方模式以<code>开放卡组织</code>为核心，卡组织既不发卡也不收单，只提供<code>转接清算</code>的平台性服务。<br>四方指的是<code>卡组织</code>,<code>发卡方</code>,<code>收单方</code>,<code>商户</code>。<br>商户负责<code>物流</code>。<br>发卡方和收单方负责<code>信息流</code>。<br>卡组织承担商户、发卡方、收单方<code>资金清算</code>的职能，包括<code>信息流</code>与<code>资金流</code>。</p>
<p>四方模式如下图所示:</p>
<p><img src="./0.jpg" alt="四方模式"></p>
<h1 id="11-三方模式"><a href="#11-三方模式" class="headerlink" title="11. 三方模式"></a>11. 三方模式</h1><p>三方模式以<code>封闭式卡组织</code>为核心，卡组织可以参与<code>发卡</code>与<code>收单</code>，也可以委托其他机构进行发卡与收单。<br>该模式下，各个商家独立发卡，单卡的适用范围直接受到限制，于是<code>封闭式卡组织应运而生</code>。封闭式卡组织一般由头部多家有影响力的商户共同发起并组件，各个参与的商户均接受其发行的卡，并约定具体的清算周期与规则，这个也是早期<code>银联各地分公司的前身</code>。<br>三方是<code>消费者</code>、<code>商家</code>、<code>卡组织</code>。<br>三方模式如下图所示:</p>
<p><img src="./1.jpg" alt="三方模式"></p>
<h1 id="12-一二三类户"><a href="#12-一二三类户" class="headerlink" title="12. 一二三类户"></a>12. 一二三类户</h1><p>对个人账户进行了一个区分，三类的区别有三个方面，分别是<code>核身方式</code>、<code>交易功能</code>、<code>付款权限</code>。不同类型的用户在这个上面有区别。</p>
<h1 id="13-银联与商业银行的合作模式"><a href="#13-银联与商业银行的合作模式" class="headerlink" title="13. 银联与商业银行的合作模式"></a>13. 银联与商业银行的合作模式</h1><p>银联手上有的资源：</p>
<ul>
<li>商户</li>
<li>云闪付</li>
<li>渠道</li>
</ul>
<blockquote>
<p>推出某一项活动分析的时候不光要分析表面的东西，还有深挖。</p>
</blockquote>
<p>比如针对<code>星巴克线下用云闪付支付，满减</code>。一方面要促进<code>云闪付的使用频率</code>，更重要的是<code>培养用户的消费习惯</code>。</p>
<h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><ul>
<li>闷声发大财，关于支付行业的秘密. <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/26054166">https://zhuanlan.zhihu.com/p/26054166</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/07/17/practice/yinlian/0_basic_background_knowledge/" data-id="cl85d5h6z00cmi99ocp8ugn8v" data-title="0_银联基础的业务知识" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AE%9E%E4%B9%A0/" rel="tag">实习</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-practice/yinlian/1_bank_app_marketing_survey" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/07/17/practice/yinlian/1_bank_app_marketing_survey/" class="article-date">
  <time class="dt-published" datetime="2021-07-17T15:15:26.000Z" itemprop="datePublished">2021-07-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E9%93%B6%E8%81%94%E5%AE%9E%E4%B9%A0/">银联实习</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/07/17/practice/yinlian/1_bank_app_marketing_survey/">1_主流商业银行APP营销活动信息收集</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>公司部门领导安排的第一项任务就是进行<code>主流商业银行APP营销活动信息收集</code>，就是通过他们的<code>官网</code>、<code>手机银行APP</code>、<code>微信公众号</code>、<code>信用卡APP</code>来挖掘过去一个季度，也就是从4月份至今各大银行所做的一些促进用户刷卡消费的<code>营销活动</code>，这样做得目的在于TODO。总的来说，这个工作不需要任何的技术手段，就是纯粹得去检索信息，然后归纳总结。</p>
<p>虽然我具有一定的技术背景，但是还需要学习一些业务知识，比如银行卡、信用卡的流程。</p>
<p>我主要负责的是<code>交通银行</code>、<code>农业银行</code>、<code>招商银行</code>、<code>民生银行</code>、<code>光大银行</code>，在他们的官方APP、(主站+信用卡)微信公众号、官网上搜集他们的营销活动信息。</p>
<h1 id="支付方式"><a href="#支付方式" class="headerlink" title="支付方式"></a>支付方式</h1><ol>
<li>银联卡</li>
</ol>
<p>线下刷银联卡或者通过Apple Pay这种形式的支付方式。</p>
<ol start="2">
<li>银行自收单</li>
</ol>
<p>银行APP内置的在线支付方式，不管这个APP绑定了哪一个银行的银行卡。</p>
<ol start="3">
<li><p>云闪付APP</p>
</li>
<li><p>微信、支付宝、京东、美团</p>
</li>
<li><p>外卡<br>Visa、Master这些境外的卡机构，不管具体使用的场景，比如在微信中绑定了<code>JCB信用卡</code>，那么统一归类为<code>外卡</code>,外卡重点关注的是刷的卡<code>不是银联卡</code></p>
</li>
</ol>
<h1 id="活动形式"><a href="#活动形式" class="headerlink" title="活动形式"></a>活动形式</h1><ol>
<li><p>抽奖</p>
</li>
<li><p>刷卡金返现</p>
</li>
</ol>
<p>刷卡金就是用自己的银行卡刷的钱数，刷卡金返现就是说你用银行卡刷了<code>X</code>元，比如规定会返回你5%，那么就会往你卡上返<code>0.5X</code>元。</p>
<ol start="3">
<li>立减金</li>
</ol>
<p>特指微信等支付平台绑定银行卡后在<code>消费的时候可以立减N元</code>。</p>
<ol start="4">
<li>随机立减</li>
</ol>
<p>描述中出现<code>N折折扣</code>，单笔最高折85折。</p>
<h1 id="消费场景"><a href="#消费场景" class="headerlink" title="消费场景"></a>消费场景</h1><ol>
<li>线下</li>
</ol>
<p>线下场景包括线下的刷挥插卡消费以及云闪付、各类pay及银行app的线下主被扫交易，其他各类交易归到线上交易。</p>
<h1 id="参与商户类型"><a href="#参与商户类型" class="headerlink" title="参与商户类型"></a>参与商户类型</h1><ol>
<li>大额场景</li>
</ol>
<p>比如买车、买房分期那种，超过10万，而平常的几千并不算大额场景。</p>
<h1 id="疑问"><a href="#疑问" class="headerlink" title="疑问"></a>疑问</h1><ol>
<li>抽奖与返现混合在一起<br>如下图所示：<br><img src="./0.jpg" alt="光大信用卡活动"><br>可以看到的是<code>抽奖</code>是过程，而<code>返现</code>是最后的结果，但这个返现又跟刷卡金返现不一样，因此我们规定使用<code>抽奖</code>最为最后的活动形式。</li>
</ol>
<h1 id="各大银行公众号推文特点"><a href="#各大银行公众号推文特点" class="headerlink" title="各大银行公众号推文特点"></a>各大银行公众号推文特点</h1><ol>
<li>招商银行</li>
</ol>
<ul>
<li>相对于我调研的其他银行推文比较少，宣传力度有待加强</li>
<li>聚焦于用户的参与(积分、转发、抽奖)，而不是一昧地宣传，在评论区有比较多的评论</li>
</ul>
<ol start="2">
<li>招商银行信用卡</li>
</ol>
<ul>
<li>2015年之后就没有更新过。。。</li>
</ul>
<ol start="3">
<li>农业银行</li>
</ol>
<ul>
<li>农业银行有两个微信公众号，分别是<code>中国农业银行微银行</code>、<code>中国农业银行</code>，其中<code>中国农业银行</code>里面的推文聚焦于农行最新资讯、品牌形象、文化理念，主要是政策性的宣传，而<code>中国农业银行微银行</code>则聚焦于农业的促销活动，提供账户类、信用卡类、生活类、预约类、优惠和理财等便捷服务，更可享受更多优惠资讯。</li>
<li><code>中国农业银行微银行</code>的推文惠加上自己的分类信息，比如<code>优惠</code>，<code>红包</code>，<code>基金</code>，<code>外汇</code>，<code>服务</code>，<code>购物</code>，<code>理财</code>，<code>定制</code>，<code>优惠</code>，<code>大促</code>，<code>乡村味道</code>，<code>兴农</code>，<code>好礼</code>对于推文的归类管理能够减轻用户的阅读负担</li>
</ul>
<ol start="4">
<li>交通银行</li>
</ol>
<ul>
<li>推文最早追溯到2020年3月份，推文数量有限</li>
<li>推送文章没有很好地分类组织</li>
</ul>
<ol start="5">
<li>民生银行</li>
</ol>
<ul>
<li>每月活动惠专门出一个推文进行总结推送</li>
<li>民生银行APP播客厅模块内有直播带货活动，公众号内会为其打广告，这个是在其他银行APP中没有看到的</li>
<li>每周五固定超级秒杀日，在民生银行APP中可以选购特价商品</li>
</ul>
<ol start="6">
<li>光大银行</li>
</ol>
<ul>
<li>推文有自己的分类信息，比如<code>产品</code>、<code>预告</code>、<code>推荐</code>、<code>财富</code></li>
</ul>
<h1 id="各大银行营销活动特点"><a href="#各大银行营销活动特点" class="headerlink" title="各大银行营销活动特点"></a>各大银行营销活动特点</h1><h2 id="1-农行"><a href="#1-农行" class="headerlink" title="1. 农行"></a>1. 农行</h2><ul>
<li>带货农产品，突出其特点</li>
<li>以<code>小豆</code>的形式开展积分活动，通过积分来兑换优惠</li>
<li>与农夫山泉、知乎、华为开展合作，用农行卡购买商品享受专属优惠</li>
<li>在京东、微信、美团上首次绑定农行信用卡给与立减优惠</li>
</ul>
<h2 id="2-交通银行"><a href="#2-交通银行" class="headerlink" title="2. 交通银行"></a>2. 交通银行</h2><ul>
<li>惠给用户呈现出所有的活动列表，方便用户去查看近期以及历史的所有活动</li>
<li>境外消费有着比较多的优惠活动，活动的形式是<code>刷卡金返现</code></li>
<li>与沃尔玛开展合作，包括推出联名卡或者满减活动</li>
<li>与小米、拼多多、华为、苏宁开展营销活动，用农行卡购买商品享受专属优惠</li>
</ul>
<h2 id="3-光大银行"><a href="#3-光大银行" class="headerlink" title="3. 光大银行"></a>3. 光大银行</h2><ul>
<li>活动多</li>
<li>聚焦于旅游活动，包括推出旅游联名卡或者旅游给予价格优惠</li>
<li>与美团、饿了么外卖开展合作，推出满减活动</li>
</ul>
<h2 id="4-招商银行"><a href="#4-招商银行" class="headerlink" title="4. 招商银行"></a>4. 招商银行</h2><ul>
<li>有毕业季等针对学生的活动</li>
<li>比较杂，什么活动都有，比如自身商城促销，看电影打车等</li>
</ul>
<h2 id="5-民生银行"><a href="#5-民生银行" class="headerlink" title="5. 民生银行"></a>5. 民生银行</h2><ul>
<li>周五固定特色节目-自有商城促销</li>
<li>聚焦于餐饮活动，比如星巴克、奈雪的茶</li>
</ul>
<h1 id="各大银行APP产品分析"><a href="#各大银行APP产品分析" class="headerlink" title="各大银行APP产品分析"></a>各大银行APP产品分析</h1><h2 id="相同点"><a href="#相同点" class="headerlink" title="相同点"></a>相同点</h2><ol>
<li><p>商城<br>都在其APP内置了自有的电子商务商城，开展自己的电商业务，并把自己的业务引流到这个商城里面去，通过微信公众号定期或者每逢节假日推送一些优惠活动，比如送满减券或者调整商品价格，针对大额的商品也会推出信用卡分期活动，有时会有24期免息活动，比如针对苹果的24期免息活动。</p>
</li>
<li><p>本地生活团购</p>
</li>
<li><p>生活缴费</p>
</li>
</ol>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>农行: 136<br>交行: 28<br>光大: 58<br>招商: 21<br>民生: 40<br>共计: 173</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/07/17/practice/yinlian/1_bank_app_marketing_survey/" data-id="cl85d5h7100cpi99o3h8sahrj" data-title="1_主流商业银行APP营销活动信息收集" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AE%9E%E4%B9%A0/" rel="tag">实习</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-other/jingxiang" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/07/17/other/jingxiang/" class="article-date">
  <time class="dt-published" datetime="2021-07-17T13:52:31.000Z" itemprop="datePublished">2021-07-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%85%B6%E4%BB%96/">其他</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/07/17/other/jingxiang/">国内常见镜像网站</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>最近在用电脑下载JAVA、node、Anaconda，发现国外的网速很慢，因此就想到了国内的镜像网站，目前收集整理到的如下：</p>
<ol>
<li><p>清华镜像</p>
</li>
<li><p>阿里云镜像</p>
</li>
<li><p>华为镜像</p>
</li>
</ol>
<p>地址为：<a target="_blank" rel="noopener" href="https://mirrors.huaweicloud.com/home%EF%BC%8C">https://mirrors.huaweicloud.com/home，</a> 这个登录再下载的话速度会快一倍，但正常的话下载速度已经很快了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/07/17/other/jingxiang/" data-id="cl85d5h50006ei99o3mjb00z3" data-title="国内常见镜像网站" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%85%B6%E4%BB%96/" rel="tag">其他</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-mianshi/yinlian" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/mianshi/yinlian/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T01:31:51.000Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E9%9D%A2%E8%AF%95/">面试</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/06/28/mianshi/yinlian/">银联</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="一面"><a href="#一面" class="headerlink" title="一面"></a>一面</h1><ul>
<li>一分钟自我介绍<ul>
<li>自己介绍得太短了！！！！</li>
</ul>
</li>
<li>自己遇到的最大的困难以及解决的方法</li>
<li>wps office与微软office的区别，并提出三点建议<ul>
<li><ol>
<li>软件占据内存大小</li>
</ol>
</li>
<li><ol start="2">
<li>wps office更适合国人习惯</li>
</ol>
</li>
<li><ol start="3">
<li>wps office没有更加高级的插件</li>
</ol>
</li>
<li><ol start="4">
<li>wps office有着非常丰富的图表模板</li>
</ol>
</li>
<li><ol start="5">
<li>wps office可以上传云文档与协作</li>
</ol>
</li>
</ul>
</li>
</ul>
<h1 id="等待通知"><a href="#等待通知" class="headerlink" title="等待通知"></a>等待通知</h1><p>加入了那个QQ群看到有600个人来争取那几十个岗位感觉自己没了哈哈哈，自己介绍答得太差了</p>
<h1 id="7-09经验"><a href="#7-09经验" class="headerlink" title="7.09经验"></a>7.09经验</h1><ol>
<li>面试的地方要正式，网络环境要好，当时是刚做完体检，所以有一些仓促，信号也不好。</li>
<li>严肃对待，因为已经有了offer，所以就想得比较简单随意。</li>
<li>自我介绍要做得多一些，当时说的是1分钟，但是自己的自我介绍太短了，面试官也是这样说的。</li>
<li>要看岗位的要求介绍，自我介绍还有项目经历里面要强调到这一点，自己只是强调到了python+sql，但是其实也可以更加贴近岗位的要求。</li>
</ol>
<h1 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h1><p>最后居然被录用了！在<code>银行合作部</code>上班，银联没有专门的数据分析部门，不知道到那里具体是做什么的。</p>
<h1 id="转正面试"><a href="#转正面试" class="headerlink" title="转正面试"></a>转正面试</h1><ul>
<li><p>在银联的实习中是否使用到了python+SQL</p>
<blockquote>
<p>无</p>
</blockquote>
</li>
<li><p>银行合作部在数字化方面还有哪一些可以改进的地方</p>
<blockquote>
<p>协作办公</p>
</blockquote>
</li>
<li><p>银联实习与金山实习的不同之处</p>
<blockquote>
<p>银联注重培训，金山注重连贯性</p>
</blockquote>
</li>
<li><p>是否愿意从事目前银行合作部的工作，放弃从前的<code>python+sql</code></p>
</li>
<li><p>性格沉稳但是略微浮躁，请你解释一下</p>
</li>
</ul>
<blockquote>
<p>长期沉稳，短期面对一些挫折后不知所措</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/mianshi/yinlian/" data-id="cl85d5h40003si99o3v6zbi52" data-title="银联" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95/" rel="tag">面试</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-mianshi/rongbao" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/28/mianshi/rongbao/" class="article-date">
  <time class="dt-published" datetime="2021-06-28T00:39:52.000Z" itemprop="datePublished">2021-06-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E9%9D%A2%E8%AF%95/">面试</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/06/28/mianshi/rongbao/">融保科技</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="笔试"><a href="#笔试" class="headerlink" title="笔试"></a>笔试</h1><ul>
<li>排序算法</li>
<li>Java多线程</li>
<li>在线测试题不需要在线运行，说出思路即可</li>
</ul>
<h1 id="一面"><a href="#一面" class="headerlink" title="一面"></a>一面</h1><p>面试的来时是一个JAVA开发的老师，所以问的很多都是Java的东西，我也直接表明了我是来做Python的。</p>
<p>面试题目</p>
<ul>
<li>介绍几个排序算法以及他们的时间复杂度与空间复杂度<ul>
<li>冒泡排序</li>
<li>插入排序</li>
</ul>
</li>
<li>Java的多线程与Python的多线程<ul>
<li>Java的Thread</li>
<li>Python的Threading</li>
<li>Python的多线程爬虫</li>
</ul>
</li>
<li>mysql数据库索引失效的案例<ul>
<li>隐式类型转换</li>
</ul>
</li>
<li>mysql事务隔离</li>
</ul>
<h1 id="反问"><a href="#反问" class="headerlink" title="反问"></a>反问</h1><ul>
<li>公司python的应用场景：主要是写爬虫。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/28/mianshi/rongbao/" data-id="cl85d5h3u003gi99oanbe07ss" data-title="融保科技" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95/" rel="tag">面试</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-mianshi/xiecheng" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/11/mianshi/xiecheng/" class="article-date">
  <time class="dt-published" datetime="2021-06-11T06:07:08.000Z" itemprop="datePublished">2021-06-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E9%9D%A2%E8%AF%95/">面试</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/06/11/mianshi/xiecheng/">携程笔面试</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="暑期实习"><a href="#暑期实习" class="headerlink" title="暑期实习"></a>暑期实习</h1><h2 id="测评"><a href="#测评" class="headerlink" title="测评"></a>测评</h2><p>全是行测题，每一题都有一定的时间限制，比较紧张。</p>
<h2 id="笔试"><a href="#笔试" class="headerlink" title="笔试"></a>笔试</h2><p>1道编程题目，一道SQL题目。<br>编程题目是用R语言，做数据框中一列数据的变换，逻辑上非常简单，但是自己不会R语言哈哈哈，照着网上的文档重新学了一遍R语言。<br>SQL题目是计算平均工资最大的部门名称与平均工资。</p>
<blockquote>
<p>没消息了哈哈哈</p>
</blockquote>
<h1 id="秋招提前批"><a href="#秋招提前批" class="headerlink" title="秋招提前批"></a>秋招提前批</h1><h2 id="测评-1"><a href="#测评-1" class="headerlink" title="测评"></a>测评</h2><p>行测题</p>
<h2 id="笔试-1"><a href="#笔试-1" class="headerlink" title="笔试"></a>笔试</h2><h3 id="选择"><a href="#选择" class="headerlink" title="选择"></a>选择</h3><ul>
<li><p>T检验</p>
<ul>
<li>双样本独立T检验</li>
<li>总体服从正态分布</li>
</ul>
</li>
<li><p>sql通配符<code>_A%</code></p>
<ul>
<li><code>_</code>代表A前面只有一个字符</li>
</ul>
</li>
<li><p>贝叶斯:某请求被随机分配到四台机器去处理，分配到每一台机器的概率为<code>A15%</code>,<code>B20%</code>,<code>C30%</code>,<code>D35%</code>，请求处理的失败概率分别为<code>5%、4%、3%、2%</code>。现在请求失败，由C造成的概率最接近(<code>B</code>).</p>
<ul>
<li>A 26%</li>
<li>B 28%</li>
<li>C 30%</li>
<li>D 32%<blockquote>
<p>全概率公式</p>
</blockquote>
</li>
</ul>
</li>
<li><p>贝叶斯:假设某旅游网站只售卖机票与酒店，产品展示比例为<code>6:4</code>，根据历史数据，机票购买率为<code>0.15</code>,酒店购买率为<code>0.20</code>。最近有一个用户购买了该网站产品，该用户购买机票的可能性有多大(<code>52.9%</code>)。</p>
</li>
</ul>
<blockquote>
<p>(15% * 60%) / (15% * 60% + 20%*40%) = 52.9%</p>
</blockquote>
<ul>
<li>SQLite编程</li>
</ul>
<blockquote>
<p>SQLite中没有<code>if</code>函数</p>
</blockquote>
<ul>
<li>Python简单编程</li>
</ul>
<blockquote>
<p>python3.4中没有字符串格式化<code>f</code>。</p>
</blockquote>
<h2 id="1面"><a href="#1面" class="headerlink" title="1面"></a>1面</h2><ul>
<li>深挖项目<ul>
<li>数据标注</li>
<li>深度语义匹配模块</li>
</ul>
</li>
<li>深挖项目</li>
</ul>
<h2 id="2面"><a href="#2面" class="headerlink" title="2面"></a>2面</h2><blockquote>
<p>对自己最不满意的一次面试，非常垃圾</p>
</blockquote>
<ul>
<li>项目<ul>
<li>MAG怎么处理的</li>
<li>ES怎么用的</li>
</ul>
</li>
<li>GMV下载怎么分析</li>
<li>金山低留存率总结</li>
<li>ABTEST<ul>
<li>自己是怎么做得</li>
<li>具体的流程是怎么样的</li>
</ul>
</li>
</ul>
<blockquote>
<p>这个就是自己没有好好准备的下场！！！！</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/11/mianshi/xiecheng/" data-id="cl85d5h3y003oi99o4qw1djer" data-title="携程笔面试" class="article-share-link">Teilen</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95/" rel="tag">面试</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/10/">&laquo; zurück</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/page/12/">12</a><a class="page-number" href="/page/13/">13</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" href="/page/12/">weiter &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Kategorien</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/CV/">-CV</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Django/">Django</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Leetcode/">Leetcode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/NLP/">NLP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SQL/">SQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/django/">django</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/leetcode/">leetcode</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/leetcode/sql/">sql</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%B8%9A%E5%8A%A1/">业务</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%B8%9A%E5%8A%A1%E6%8C%87%E6%A0%87/">业务指标</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%B8%AD%E4%BF%A1%E8%AF%81%E5%88%B8/">中信证券</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%85%B6%E4%BB%96/">其他</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%85%B6%E4%BB%96/Django/">Django</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/Flume/">Flume</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E9%9B%86/">数据集</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%AF%95%E4%B8%9A%E8%AE%BA%E6%96%87/">毕业论文</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/">毕业设计</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%88%AC%E8%99%AB/">爬虫</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%A7%8B%E6%8B%9B/">秋招</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%A7%8B%E6%8B%9B/%E9%9D%A2%E8%AF%95/">面试</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AC%94%E8%AF%95/">笔试</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BB%9F%E8%AE%A1%E5%AD%A6/">统计学</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%BA%E6%96%87/">论文</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%87%91%E5%B1%B1%E5%AE%9E%E4%B9%A0/">金山实习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%93%B6%E8%81%94%E5%AE%9E%E4%B9%A0/">银联实习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9D%A2%E8%AF%95/">面试</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/leetcode/" rel="tag">-leetcode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CV/" rel="tag">CV</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Django/" rel="tag">Django</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Flume/" rel="tag">Flume</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hbase/" rel="tag">Hbase</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NLP/" rel="tag">NLP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL/" rel="tag">SQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/django/" rel="tag">django</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/leetcode/" rel="tag">leetcode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql/" rel="tag">sql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%9A%E5%8A%A1/" rel="tag">业务</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AD%E4%BF%A1%E8%AF%81%E5%88%B8/" rel="tag">中信证券</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%B6%E4%BB%96/" rel="tag">其他</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/" rel="tag">大数据</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%9E%E4%B9%A0/" rel="tag">实习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E4%BD%9C/" rel="tag">工作</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E9%9B%86/" rel="tag">数据集</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E9%A2%84%E6%B5%8B/" rel="tag">时间序列预测</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag">机器学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%AF%95%E4%B8%9A%E8%AE%BA%E6%96%87/" rel="tag">毕业论文</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/" rel="tag">毕业设计</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%88%AC%E8%99%AB/" rel="tag">爬虫</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A7%8B%E6%8B%9B/" rel="tag">秋招</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AC%94%E8%AF%95/" rel="tag">笔试</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%9F%E8%AE%A1%E5%AD%A6/" rel="tag">统计学</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BA%E6%96%87/" rel="tag">论文</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%87%91%E5%B1%B1%E5%AE%9E%E4%B9%A0/" rel="tag">金山实习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%93%B6%E8%81%94%E5%AE%9E%E4%B9%A0/" rel="tag">银联实习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95/" rel="tag">面试</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/leetcode/" style="font-size: 10px;">-leetcode</a> <a href="/tags/CV/" style="font-size: 10px;">CV</a> <a href="/tags/Django/" style="font-size: 13.33px;">Django</a> <a href="/tags/Flume/" style="font-size: 10px;">Flume</a> <a href="/tags/Hbase/" style="font-size: 10px;">Hbase</a> <a href="/tags/NLP/" style="font-size: 10px;">NLP</a> <a href="/tags/SQL/" style="font-size: 18.89px;">SQL</a> <a href="/tags/django/" style="font-size: 10px;">django</a> <a href="/tags/leetcode/" style="font-size: 15.56px;">leetcode</a> <a href="/tags/sql/" style="font-size: 10px;">sql</a> <a href="/tags/%E4%B8%9A%E5%8A%A1/" style="font-size: 13.33px;">业务</a> <a href="/tags/%E4%B8%AD%E4%BF%A1%E8%AF%81%E5%88%B8/" style="font-size: 11.11px;">中信证券</a> <a href="/tags/%E5%85%B6%E4%BB%96/" style="font-size: 20px;">其他</a> <a href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/" style="font-size: 13.33px;">大数据</a> <a href="/tags/%E5%AE%9E%E4%B9%A0/" style="font-size: 16.67px;">实习</a> <a href="/tags/%E5%B7%A5%E4%BD%9C/" style="font-size: 11.11px;">工作</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 10px;">数据结构</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E9%9B%86/" style="font-size: 10px;">数据集</a> <a href="/tags/%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E9%A2%84%E6%B5%8B/" style="font-size: 10px;">时间序列预测</a> <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 12.22px;">机器学习</a> <a href="/tags/%E6%AF%95%E4%B8%9A%E8%AE%BA%E6%96%87/" style="font-size: 14.44px;">毕业论文</a> <a href="/tags/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/" style="font-size: 10px;">毕业设计</a> <a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 12.22px;">爬虫</a> <a href="/tags/%E7%A7%8B%E6%8B%9B/" style="font-size: 13.33px;">秋招</a> <a href="/tags/%E7%AC%94%E8%AF%95/" style="font-size: 12.22px;">笔试</a> <a href="/tags/%E7%BB%9F%E8%AE%A1%E5%AD%A6/" style="font-size: 12.22px;">统计学</a> <a href="/tags/%E8%AE%BA%E6%96%87/" style="font-size: 11.11px;">论文</a> <a href="/tags/%E9%87%91%E5%B1%B1%E5%AE%9E%E4%B9%A0/" style="font-size: 13.33px;">金山实习</a> <a href="/tags/%E9%93%B6%E8%81%94%E5%AE%9E%E4%B9%A0/" style="font-size: 10px;">银联实习</a> <a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 17.78px;">面试</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">letzter Beitrag</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/05/14/other/time_series_pred/">时间序列预测</a>
          </li>
        
          <li>
            <a href="/2023/05/01/other/customer_analysis_in_python/">用户价值分析</a>
          </li>
        
          <li>
            <a href="/2022/06/15/other/PEP8/">PEP-8: Python代码规范</a>
          </li>
        
          <li>
            <a href="/2022/05/29/other/fanqie/">番茄工作法</a>
          </li>
        
          <li>
            <a href="/2022/05/20/citics/neo4j_query_optimize/">neo4j查询调优</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>