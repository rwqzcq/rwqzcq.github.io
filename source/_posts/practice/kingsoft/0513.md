---
title: 5月13日工作内容
date: 2021-05-13 10:07:42
tags:
 - 实习
categories:
 - 金山实习
---

# 工作内容

1、先看懂每个迭代是在干啥  如果有不明白的可以在 【安卓+pc数据需求】的群里问下何文钦or曹念慈

2、每个迭代他们自己有写需要关注的数据，你可以看下，然后思考下这个数据是否全面   

# 具体迭代

## 【4.12~4.16】「全球」-首页&打开文件列表文件显示优化

### 需要关注的数据



## 【3.29~4.2】系统复制栏WPS入口-将文字保存成Memo

### 需要关注的数据

1. 埋点数据

![](安卓-memo-埋点.png)

需要关注的是`属性值`，查某一个行为的方法为:

```sql
SELECT 
    *
FROM `wps-cloud-service.analytics_153386958.events_20210511` 
where
    app_info.version = '13.9' and 
    event_name='page_show' and
    (select value.string_value from unnest(event_params) where key='category') = 'Memo' and
    (select value.string_value from unnest(event_params) where key='func_name') = 'Savereminder_SystemCopyBarEntrance'
limit 10
```
其中核心查询条件为
```sql
(select value.string_value from unnest(event_params) where key='category') = 'Memo'
```
[`unnest`](https://cloud.google.com/bigquery/docs/reference/standard-sql/arrays)函数是把`event_params`展开成一张表，这个表里面有两个(实际上为多个，主要取决于event_params的key的数量)字段，分别为`key`, `value`，value又可以分成`string_value`

> 个人理解为在一行记录中产生一个子表，然后在这个子表中查询。

unnest的官方表述：

```txt
如需将 ARRAY 转换为一组行（即执行展平操作），请使用 UNNEST 运算符。UNNEST 获取一个 ARRAY，然后返回一个表，ARRAY 中的每个元素均占该表的一行。
由于 UNNEST 破坏了 ARRAY 元素的顺序，您可能需要恢复表中的顺序。为此，请使用可选的 WITH OFFSET 子句返回另一个包含各数组元素偏移量的列，然后使用 ORDER BY 子句按偏移量对行进行排序。
```

2. 指标
- uv
- 文档打开率
- 周留存率

### 检索埋点数据
`event`表中记录了安卓端内所有用户的所有行为数据。
从`event`宽表中检索到相关的埋点数据，event宽表的形式不同于传统的关系型数据库表结构，它是包含Key_value形式的结构，如下图所示：
![](event-表结构.png)

其中标识一个用户的行为的核心字段包括
- event_name: 用户所触发的事件的大的类，比如page_show，它的意思是打开页面
- event_params.key: event_name的一些参数，这个是自定义的，根据不同的业务场景定义不同的key
- event_params.value.string_value: key所对应的值,该数值是字符串类型

比如下面的数据
![](event-demo.png)
这里面的一条数据记录了
> `某一个用户在某一个外部应用中选择了一段话，然后进入系统复制栏入口保存提示页`。
核心信息为`event_name.params.key.category=Memo`以及`event_name.params.key.func_name=Savereminder_SystemCopyBarEntrance`





# 产品涉及到得名词

1. dialog
![dialog](dialog.png)
对话框

2. toast
![toast](toast.png)
简单提示

3. pop
![pop](pop.png)

# 参考链接
1. APP 反馈的三种形式：toast、snackbar、dialog. https://app.yinxiang.com/fx/05d7f0ce-9d7c-4e11-a45e-80a80361b563
2. 防止被数字欺骗. https://app.yinxiang.com/fx/b9c3ea0f-d763-4001-a4c2-c6016723907d
3. 什么是AB Test. https://www.zhihu.com/question/20045543/answer/1103961403