---
title: 卡方检验
date: 2021-06-01 10:27:32
tags:
 - 统计学
categories:
 - 统计学
---

# 卡方检验是什么

用来比较两组或者多组之间的`分类型变量`之间是否有显著性差异。

# 卡方检验具体步骤

1. 建立原假设与备择假设
两变量之间相互独立

2. 计算卡方值

![](kafang.png)

3. 计算P值

> 自由度 = (行数-1) * (列数-1)

根据自由度以及卡方值(临界值)可以确定P值。

![](table.jpg)

4. 得到结论

接受原假设或者推翻原假设。


# 卡方检验的注意事项

1. 适用于分类型变量。
2. 观测值之间相互独立。
3. 样本量要大，理论上最低频数为5。

# 案例

## 描述

判断吸烟与是否患肺癌之间的关系，分别调查了吸烟的人、患肺癌的人，得到的统计结果如下：

![](1.jpg)

上图显示的是吸烟的人中多多少患肺癌、多少人没有患肺癌、患肺癌的人中有多少人吸烟、患肺癌的人中有多少人没有吸烟。
现在老判断吸烟与患肺癌之间是否有关系，则可以这样做。

## 解题

1. 建立假设

是否吸烟与患肺病之间没有必然联系，即两变量之间相互独立。
也就是
>不管是否患肺病的群体中吸烟者的比例应该等于合计中吸烟者的比例，即240/720=33%。 

2. 计算卡方值
根据这个33%这个假设值可以得到理论上患肺病中吸烟的人数以及不患肺病中吸烟的人数。
![](2.png)

根据上图中的理论频数与实际频数可以来计算卡方值。
![](3.jpg)

得到卡方值还有自由度=`(2-1)*(2-1)=1`后查表可以可以得到临界以及对应的P值。

![](table.jpg)

3. 计算P值

已知卡方值为60.53，当自由度为1的时候，可以看到`p=0.005`所对应的临界值为7.88,因为`60.53>7.88`，所以可以得出

> p < 0.005

在我们假设0.5%的显著性水平下，我们可以认为原假设是小概率事件，不可能发生，因此原假设被推翻，即两者之间是有关系的。

4. 结论

吸烟与患肺病之间有关系吗，而且是正向的关系，即吸烟更容易患肺病。

# 在项目中如何进行卡方检验

## 概述

在做abtest的时候要判断某一个功能，比如更改了首页的文件排列方式，是否起到了效果，效果的衡量标准在我们的项目中为`次日留存`。
那么就可以利用卡方检验来判断是否比较合适。

## 步骤

1. 获取实验组与对照组中留存的uv，与没有留存的uv。

![](4.png)

2. 计算卡方值

已知实际表，根据

>留存的uv占总uv的33.28

可以得到各个的理论值。

实验组中0的值为`实验组总uv*(1-0.3328)`,实验组中1的值为`实验组总uv*0.3328`。
对照组同理。最后得到卡方值`1.87122`。

3. 计算P值
自由度为1，卡方值为1.87，p值在0.5与0.1之间，效果不显著。

4. 得到结论-显著不显著

0.1<p<0.5，不显著，则承认原假设，两者之间没有关系，同时我们也可以看到的是，实验组的留存要低于对照组，那么可能该版本的优化产生了负面的影响。




# 参考链接
- 卡方检验. https://zhuanlan.zhihu.com/p/87008470